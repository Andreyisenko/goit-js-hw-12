{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// console.log(65);\nexport default createMarkup\n\n\nfunction createMarkup(arr) {\n    return arr\n      .map(\n        ({\n          id,\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `<li data-id=\"${id}\" class=\"gallery-item\">\n              <a href=${largeImageURL} class=\"gallery-link\">\n              <img src=${webformatURL} class=\"gallery-image\" alt=${tags}> \n              <div class=\"wrap\"><h2 class=\"title-like\">Likes <span class=\"span-text\"> ${likes} </span></h2>\n               <h2 class=\"title-views\">Views <span class=\"span-text\"> ${views} </span></h2>\n               <h2 class=\"title-comments\">Comments <span class=\"span-text\">${comments}</span> </h2>\n               <h2 class=\"title-downloads\">Downloads <span class=\"span-text\">${downloads} </span></h2></div>\n  </a>\n              </li>`\n      )\n      .join('');\n  }\n\n","// console.log(100);\nimport axios from 'axios';\nimport createMarkup from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\n// iziToast.info({\n//   timeout: 3000,\n//   title: 'Hello',\n//   position: 'center',\n//   message: 'Welcome!',\n// //   backgroundColor: 'green',\n//   titleColor: 'red',\n//   Width: 200,\n// });\nconst gallerY = document.querySelector('.gallery');\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '47413156-c8c9abea8f6d88937b7892740';\nconst forM = document.querySelector('.feedback-form');\nconst loadMoreBtn = document.querySelector('.load-more');\n// console.log(forM);\nlet page = 1;\nlet qData;\nloadMoreBtn.addEventListener('click', onLoadMore);\n// forM.addEventListener('submit', handleSubmit);\n\n// function handleSubmit(event) {\n//   event.preventDefault();\n//   qData = event.currentTarget.elements.photo.value.trim();\n//   // console.log(qData);\n//   searchData(`${qData}`);\n\nasync function searchData(datA) {\n  if (datA === '') {\n    iziToast.show({\n      color: 'red',\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    // spn.classList.remove('is-hidden');\n    return;\n  }\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n\n    q: `cad`,\n    page,\n    per_page: 15,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  const { data } = await axios(`${BASE_URL}?${params}`);\n  return data;\n}\nsearchData(qData)\n  .then(data => {\n    // console.log(data);\n    gallerY.insertAdjacentHTML('afterbegin', createMarkup(data.hits));\n\n    if (gallerY.children.length < data.totalHits) {\n      loadMoreBtn.classList.replace('load-more-hidden', 'load-more');\n    } \n      \n    \n\n    lightbox.refresh();\n  })\n  .catch(error => console.log(error.massage));\n// }\n\nasync function onLoadMore() {\n  page += 1;\n  loadMoreBtn.disabled = true;\n\n  try {\n    const data = await searchData(page);\n    gallerY.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n\n    if (gallerY.children.length >= data.totalHits) {\n      iziToast.show({\n        color: 'blue',\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.classList.replace('load-more', 'load-more-hidden');\n\n    }\n    lightbox.refresh();\n    console.log(data);\n    console.log(data.totalHits);\n    console.log(data.hits.length);\n    console.log(gallerY.children.length);\n\n  } catch (error) {\n    alert(error.massage);\n  }finally {\n    loadMoreBtn.disabled = false;\n  }\n}\n\n// async function handleSubmit(event) {\n// event.preventDefault();\n\n//   const params = new URLSearchParams({\n//     key: API_KEY,\n\n//     q: 'cat',\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: 'true',\n//   });\n//   axios(`https://pixabay.com/api/?${params}`)\n// .then ((res)=> console.log(res)\n\n// )\n"],"names":["createMarkup","arr","id","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","gallerY","BASE_URL","API_KEY","loadMoreBtn","page","qData","onLoadMore","searchData","datA","iziToast","params","data","axios","error"],"mappings":"owBAIA,SAASA,EAAaC,EAAK,CACvB,OAAOA,EACJ,IACC,CAAC,CACC,GAAAC,EACA,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IAAc,gBAAgBP,CAAE;AAAA,wBACRE,CAAa;AAAA,yBACZD,CAAY,8BAA8BE,CAAI;AAAA,wFACiBC,CAAK;AAAA,wEACrBC,CAAK;AAAA,6EACAC,CAAQ;AAAA,+EACNC,CAAS;AAAA;AAAA,oBAGjF,EACA,KAAK,EAAE,CACd,CCjBA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAChB,CAAC,EAWKC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,2BACXC,EAAU,qCACH,SAAS,cAAc,gBAAgB,EACpD,MAAMC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAO,EACPC,EACJF,EAAY,iBAAiB,QAASG,CAAU,EAShD,eAAeC,EAAWC,EAAM,CAC9B,GAAIA,IAAS,GAAI,CACfC,EAAS,KAAK,CACZ,MAAO,MACP,SAAU,WACV,QACE,0EACR,CAAK,EAED,MACD,CAED,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKR,EAEL,EAAG,MACH,KAAAE,EACA,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EACK,CAAE,KAAAO,GAAS,MAAMC,EAAM,GAAGX,CAAQ,IAAIS,CAAM,EAAE,EACpD,OAAOC,CACT,CACAJ,EAAWF,CAAK,EACb,KAAKM,GAAQ,CAEZX,EAAQ,mBAAmB,aAAcZ,EAAauB,EAAK,IAAI,CAAC,EAE5DX,EAAQ,SAAS,OAASW,EAAK,WACjCR,EAAY,UAAU,QAAQ,mBAAoB,WAAW,EAK/DL,EAAS,QAAO,CACpB,CAAG,EACA,MAAMe,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,EAG5C,eAAeP,GAAa,CAC1BF,GAAQ,EACRD,EAAY,SAAW,GAEvB,GAAI,CACF,MAAMQ,EAAO,MAAMJ,EAAWH,CAAI,EAClCJ,EAAQ,mBAAmB,YAAaZ,EAAauB,EAAK,IAAI,CAAC,EAE3DX,EAAQ,SAAS,QAAUW,EAAK,YAClCF,EAAS,KAAK,CACZ,MAAO,OACP,SAAU,WACV,QAAS,4DACjB,CAAO,EACDN,EAAY,UAAU,QAAQ,YAAa,kBAAkB,GAG/DL,EAAS,QAAO,EAChB,QAAQ,IAAIa,CAAI,EAChB,QAAQ,IAAIA,EAAK,SAAS,EAC1B,QAAQ,IAAIA,EAAK,KAAK,MAAM,EAC5B,QAAQ,IAAIX,EAAQ,SAAS,MAAM,CAEpC,OAAQa,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAG,CACCV,EAAY,SAAW,EACxB,CACH"}